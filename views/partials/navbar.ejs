<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Royal Monarch</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/tailwindcss/output.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
    <script src="https://raw.githubusercontent.com/rosshatokay/toasterjs/main/src/toaster.js"></script>
    <link rel="stylesheet" href="https://raw.githubusercontent.com/rosshatokay/toasterjs/main/src/toaster.css" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        /* Add padding to body to prevent content from being hidden behind fixed navbar */
        body {
            font-family: 'Georgia', serif;
            background-color: #f8f5f0;
            color: #2c2c2c;
            padding-top: 3.5rem;
        }
        
        /* Classic font styling */
        .font-classic {
            font-family: 'Georgia', serif;
            letter-spacing: 0.03em;
        }
        
        /* Classic elegant divider */
        .elegant-divider {
            position: relative;
        }
        
        .elegant-divider::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(to right, transparent, #8B4513, transparent);
        }
        
        /* Classic elegant button */
        .btn-classic {
            background-color: transparent;
            border: 1px solid #8B4513;
            color: #8B4513;
            transition: all 0.3s ease;
        }
        
        .btn-classic:hover {
            background-color: #8B4513;
            color: #fff;
        }
        
        /* Navbar height */
        .nav-height {
            height: 3.5rem;
        }

        /* Enhanced Navbar Animations */
        .nav-link {
            position: relative;
            transition: all 0.3s ease;
            font-size: 0.75rem;
        }

        @media (min-width: 640px) {
            .nav-link {
                font-size: 0.875rem;
            }
        }

        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -4px;
            left: 0;
            background-color: #8B4513;
            transition: width 0.3s ease;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .nav-icon {
            transition: all 0.3s ease;
            transform-origin: center;
            font-size: 0.875rem;
        }

        @media (min-width: 640px) {
            .nav-icon {
                font-size: 1rem;
            }
        }

        .nav-icon:hover {
            transform: scale(1.1);
            color: #8B4513;
        }

        .logo-container {
            transition: all 0.3s ease;
        }

        .logo-container:hover {
            transform: scale(1.02);
        }

        .cart-badge {
            transition: all 0.3s ease;
            font-size: 0.625rem;
            height: 1rem;
            width: 1rem;
        }

        @media (min-width: 640px) {
            .cart-badge {
                font-size: 0.75rem;
                height: 1.25rem;
                width: 1.25rem;
            }
        }

        .cart-badge:hover {
            transform: scale(1.1);
        }

        /* Navbar scroll effects */
        .navbar {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            height: 3.5rem;
        }

        .navbar-scrolled {
            margin: 0 auto;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            height: 3rem;
        }

        .navbar-scrolled .logo-container {
            transform: scale(0.9);
        }

        .navbar-scrolled .nav-link {
            font-size: 0.75rem;
        }

        .navbar-scrolled .nav-icon {
            transform: scale(0.9);
        }
    </style>
</head>

<body>

<nav class="navbar fixed top-0 left-0 right-0 z-50 flex items-center justify-between px-2 sm:px-4 md:px-6 py-2 border-b border-gray-200 shadow-sm bg-white transition-all duration-300 w-full">
    <!-- Left navigation links -->
    <div class="flex items-center space-x-2 sm:space-x-4 md:space-x-6">
        <a href="/home" class="nav-link text-gray-800 hover:text-[#8B4513] transition-colors duration-300 font-classic uppercase tracking-wider">Home</a>
        <a href="/shop" class="nav-link text-gray-800 hover:text-[#8B4513] transition-colors duration-300 font-classic uppercase tracking-wider">Shop</a>
    </div>
    
    <!-- Logo and brand name - centered with greater spacing -->
    <div class="logo-container flex items-center space-x-1 sm:space-x-2 absolute left-1/2 transform -translate-x-1/2">
        <img alt="Royal Monarch logo" src="/images/Royal Monarch logo.png" class="h-6 sm:h-8 md:h-10 transition-transform duration-300 hover:scale-105"/>
        <div class="flex flex-col items-start justify-center">
            <span class="text-[#8B4513] text-sm sm:text-base md:text-lg font-serif tracking-wider transition-colors duration-300 hover:text-[#6B3610]">ROYAL MONARCH</span>
            <span class="text-gray-600 text-[0.6rem] sm:text-xs tracking-wider uppercase transition-colors duration-300 hover:text-gray-800 hidden sm:block">Luxury Automobiles</span>
        </div>
    </div>
    
    <!-- Right icons with increased spacing -->
    <div class="flex items-center space-x-2 sm:space-x-4 md:space-x-6">
        <a href="/wishlist" class="nav-icon text-gray-800 hover:text-[#8B4513] transition-colors duration-300">
            <i class="fas fa-heart"></i>
        </a>
        <a href="/profile" class="nav-icon text-gray-800 hover:text-[#8B4513] transition-colors duration-300">
            <i class="fas fa-user"></i>
        </a>
        <a href="/cart" class="nav-icon text-gray-800 hover:text-[#8B4513] transition-colors duration-300 relative">
            <i class="fas fa-shopping-cart"></i>
            <% if (typeof cartCount !== 'undefined' && cartCount > 0) { %>
                <span class="cart-badge absolute -top-1 -right-1 bg-[#8B4513] text-white rounded-full flex items-center justify-center">
                    <%= cartCount %>
                </span>
            <% } %>
        </a>
    </div>
</nav>

<script>
// Update cart count whenever cart is updated
document.addEventListener('cartUpdated', function() {
    // Fetch updated cart count
    fetch('/cart/count')
        .then(response => response.json())
        .then(data => {
            // Update cart count display
            const cartCountElement = document.querySelector('.fa-shopping-cart').nextElementSibling;
            if (data.count > 0) {
                if (cartCountElement) {
                    cartCountElement.textContent = data.count;
                } else {
                    const countBadge = document.createElement('span');
                    countBadge.className = 'cart-badge absolute -top-1 -right-1 bg-[#8B4513] text-white rounded-full flex items-center justify-center';
                    countBadge.textContent = data.count;
                    document.querySelector('.fa-shopping-cart').parentElement.appendChild(countBadge);
                }
            } else if (cartCountElement) {
                cartCountElement.remove();
            }
        })
        .catch(error => console.error('Error updating cart count:', error));
});

// Navbar scroll effects with velocity-based animation
let lastScrollTop = 0;
let lastScrollTime = Date.now();
let scrollVelocity = 0;
const navbar = document.querySelector('.navbar');
const scrollThreshold = 50;
const velocityThreshold = 0.5;

window.addEventListener('scroll', function() {
    const currentScroll = window.scrollY;
    const currentTime = Date.now();
    const timeDiff = currentTime - lastScrollTime;
    
    scrollVelocity = Math.abs(currentScroll - lastScrollTop) / timeDiff;
    
    lastScrollTop = currentScroll;
    lastScrollTime = currentTime;
    
    if (currentScroll > scrollThreshold && scrollVelocity > velocityThreshold) {
        navbar.classList.add('navbar-scrolled');
        navbar.classList.add('py-2');
        navbar.classList.remove('py-4');
        
        const animationSpeed = Math.min(0.4, 0.2 + (scrollVelocity * 0.1));
        navbar.style.transition = `all ${animationSpeed}s cubic-bezier(0.4, 0, 0.2, 1)`;
    } else if (currentScroll <= scrollThreshold) {
        navbar.classList.remove('navbar-scrolled');
        navbar.classList.add('py-4');
        navbar.classList.remove('py-2');
        navbar.style.transition = 'all 0.4s cubic-bezier(0.4, 0, 0.2, 1)';
    }
});

// Add smooth transition for hover effects
document.querySelectorAll('.nav-link, .nav-icon, .logo-container, .cart-badge').forEach(element => {
    element.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
});
</script>
